<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultimate AI Meal Platform</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg,#dfe9f3,#ffffff);
    margin:0;
    padding:20px;
    text-align:center;
    transition:0.3s;
  }
  body.dark { background:#121212; color:white; }
  .app {
    max-width:650px;
    margin:auto;
    background:white;
    padding:20px;
    border-radius:25px;
    box-shadow:0 15px 40px rgba(0,0,0,0.15);
  }
  body.dark .app { background:#1e1e1e; }
  select, button, input {
    padding:12px;
    margin:8px 0;
    width:100%;
    border-radius:12px;
    border:1px solid #ddd;
    font-size:15px;
  }
  button { background:#4f7cff; color:white; border:none; cursor:pointer; }
  img { width:100%; border-radius:15px; margin-top:10px; max-height:280px; object-fit:cover; }
  ul { text-align:left; }
  .badge { background:#eef4ff; padding:6px 12px; border-radius:20px; display:inline-block; margin-top:8px; }
</style>
</head>
<body>

<h1>Ultimate AI Meal Platform</h1>
<button onclick="toggleDarkMode()">üåô Toggle Dark Mode</button>

<div class="app">

<h3>User Login</h3>
<input id="username" placeholder="Enter username">
<button onclick="loginUser()">Login</button>
<div id="welcome"></div>

<select id="mealType">
<option value="breakfast">Breakfast</option>
<option value="lunch">Lunch</option>
<option value="dinner">Dinner</option>
<option value="diet">Diet / Healthy</option>
</select>

<input type="text" id="ingredientsInput" placeholder="Enter ingredients you have">
<button onclick="recommendMeal()">Recommend Meal</button>
<button onclick="generateSteps()">Generate AI Steps</button>
<button onclick="generateAIRecipe()">Generate Real AI Recipe (API Ready)</button>
<button onclick="saveFavorite()">‚ù§Ô∏è Save to Favorites</button>

<h2 id="mealName"></h2>
<div id="mealBadge" class="badge"></div>
<div id="calories"></div>
<img id="mealImage" />
<ul id="steps"></ul>

<h3>‚≠ê Favorite Meals</h3>
<ul id="favoriteList"></ul>

</div>

<script>
function toggleDarkMode(){ document.body.classList.toggle('dark'); }

function loginUser(){
  const name=document.getElementById('username').value;
  localStorage.setItem('user',name);
  document.getElementById('welcome').innerText="Welcome, "+name;
}

if(localStorage.getItem('user')){
 document.getElementById('welcome').innerText="Welcome, "+localStorage.getItem('user');
}

const meals={
  breakfast:[
    {name:"Omelette",image:"https://images.unsplash.com/photo-1510693206972-df098062cb71",type:"High Protein",calories:250},
    {name:"Avocado Toast",image:"https://images.unsplash.com/photo-1603048719539-9ecb7f47b3b0",type:"Healthy Fats",calories:300},
    {name:"Pancakes",image:"https://images.unsplash.com/photo-1587735243615-c03f25aaff15",type:"Energy Boost",calories:350},
    {name:"Fruit Yogurt Bowl",image:"https://images.unsplash.com/photo-1488477181946-6428a0291777",type:"Light Meal",calories:220},
    {name:"Oatmeal with Honey",image:"https://images.unsplash.com/photo-1512058564366-18510be2db19",type:"Fiber Rich",calories:280}
  ],
  lunch:[
    {name:"Chicken Sandwich",image:"https://images.unsplash.com/photo-1550547660-d9450f859349",type:"Balanced",calories:450},
    {name:"Pasta",image:"https://images.unsplash.com/photo-1525755662778-989d0524087e",type:"Carb Energy",calories:550},
    {name:"Caesar Salad",image:"https://images.unsplash.com/photo-1550304943-4f24f54ddde9",type:"Light",calories:320},
    {name:"Beef Wrap",image:"https://images.unsplash.com/photo-1604908177522-402d3f7a03fd",type:"Protein",calories:480},
    {name:"Vegetable Stir Fry",image:"https://images.unsplash.com/photo-1546069901-ba9599a7e63c",type:"Healthy",calories:350}
  ],
  dinner:[
    {name:"Grilled Salmon",image:"https://images.unsplash.com/photo-1467003909585-2f8a72700288",type:"Omega-3",calories:400},
    {name:"Steak",image:"https://images.unsplash.com/photo-1600891964599-f61ba0e24092",type:"High Protein",calories:600},
    {name:"Rice with Vegetables",image:"https://images.unsplash.com/photo-1604908177522-402d3f7a03fd",type:"Comfort",calories:420},
    {name:"Chicken Curry",image:"https://images.unsplash.com/photo-1603894584373-5ac82b2ae398",type:"Spicy",calories:520},
    {name:"Shrimp Pasta",image:"https://images.unsplash.com/photo-1563379091339-03246963d51a",type:"Seafood",calories:510}
  ],
  diet:[
    {name:"Quinoa Salad",image:"https://images.unsplash.com/photo-1505253213348-cd54c1f9d3a1",type:"Weight Loss",calories:320},
    {name:"Greek Yogurt Bowl",image:"https://images.unsplash.com/photo-1488477181946-6428a0291777",type:"High Protein",calories:200},
    {name:"Grilled Chicken Veggie Plate",image:"https://images.unsplash.com/photo-1546069901-ba9599a7e63c",type:"Low Carb",calories:350},
    {name:"Salmon Avocado Salad",image:"https://images.unsplash.com/photo-1551248429-40975aa4de74",type:"Healthy Fats",calories:340},
    {name:"Green Smoothie Bowl",image:"https://images.unsplash.com/photo-1490474418585-ba9bad8fd0ea",type:"Detox",calories:260}
  ]
};

let currentMeal=null;

function recommendMeal(){
 const type=document.getElementById('mealType').value;
 const options=meals[type];
 currentMeal=options[Math.floor(Math.random()*options.length)];
 document.getElementById('mealName').innerText=currentMeal.name;
 document.getElementById('mealImage').src=currentMeal.image;
 document.getElementById('mealBadge').innerText=currentMeal.type;
 document.getElementById('calories').innerText="Calories: "+currentMeal.calories+" kcal";
 document.getElementById('steps').innerHTML="";
}

function generateSteps(){
 if(!currentMeal) return;
 const steps=[
  "Prepare fresh ingredients",
  "Cook using proper technique",
  "Season and taste",
  "Serve and enjoy"
 ];
 const list=document.getElementById('steps');
 list.innerHTML="";
 steps.forEach(s=>{const li=document.createElement('li'); li.innerText=s; list.appendChild(li);});
}

async function generateAIRecipe() {
    if (ingredients.length === 0) {
      alert("Add at least one ingredient first!");
      return;
    }

    setLoading(true);

    try {
      const prompt = `Create a simple recipe using these ingredients: ${ingredients.join(", ")}. Include a title, ingredients list, and cooking steps.`;

      const response = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer YOUR_OPENAI_API_KEY" // replace with your key or proxy backend
        },
        body: JSON.stringify({
          model: "gpt-4.1-mini",
          messages: [
            { role: "system", content: "You are a helpful cooking assistant." },
            { role: "user", content: prompt }
          ],
          temperature: 0.7
        })
      });

      const data = await response.json();
      const recipe = data.choices?.[0]?.message?.content || "No recipe generated.";

      setRecipeText(recipe);
    } catch (err) {
      console.error(err);
      alert("Error generating recipe. Check API key or backend setup.");
    } finally {
      setLoading(false);
    }
  } catch (err) {
    list.innerHTML = "<li>Error generating recipe. Make sure API key is added.</li>";
  }
}

function saveFavorite(){
 if(!currentMeal) return;
 let fav=JSON.parse(localStorage.getItem('favorites'))||[];
 fav.push(currentMeal.name);
 localStorage.setItem('favorites',JSON.stringify(fav));
 displayFavorites();
}

function displayFavorites(){
 const list=document.getElementById('favoriteList');
 list.innerHTML="";
 let fav=JSON.parse(localStorage.getItem('favorites'))||[];
 fav.forEach(m=>{const li=document.createElement('li'); li.innerText=m; list.appendChild(li);});
}
displayFavorites();
</script>

</body>
</html>
